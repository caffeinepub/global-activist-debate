{
  "kind": "build_request",
  "title": "Allow users to start conversations using username instead of Principal ID",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-61",
      "text": "Update the StartConversationModal component to replace the Principal ID input field with a username input field, allowing users to search for and select conversation participants by their username instead of requiring Principal ID knowledge",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-final"
        ],
        "quotes": [
          "can you change that so that when you wanna make a conversation you just have to put your profile name"
        ]
      },
      "acceptanceCriteria": [
        "StartConversationModal displays a username input field instead of Principal ID field",
        "Users can type a username to search for other users",
        "The component validates that the entered username exists before allowing conversation creation",
        "Form submission creates a conversation using the username to resolve the Principal ID internally"
      ]
    },
    {
      "id": "REQ-62",
      "text": "Add a backend query function to look up a user's Principal ID by their username, enabling username-based participant lookup for conversation creation",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-user-final"
        ],
        "quotes": [
          "can you change that so that when you wanna make a conversation you just have to put your profile name"
        ]
      },
      "acceptanceCriteria": [
        "Backend exposes a query function that accepts a username string and returns the corresponding Principal ID",
        "Function returns an appropriate error or null response when username is not found",
        "Function performs case-insensitive username matching for better user experience"
      ]
    },
    {
      "id": "REQ-63",
      "text": "Update the useQueries.ts hook to add a query function for looking up Principal IDs by username, integrating the new backend query into the React Query system",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-final"
        ],
        "quotes": [
          "can you change that so that when you wanna make a conversation you just have to put your profile name"
        ]
      },
      "acceptanceCriteria": [
        "New React Query hook is available for username-to-Principal lookup",
        "Hook properly handles loading, error, and success states",
        "Query results are cached appropriately to avoid redundant backend calls"
      ]
    },
    {
      "id": "REQ-64",
      "text": "Update the StartConversationModal form submission logic to resolve the username to a Principal ID before calling the startConversation backend function, maintaining backward compatibility with the existing conversation creation API",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-final"
        ],
        "quotes": [
          "can you change that so that when you wanna make a conversation you just have to put your profile name"
        ]
      },
      "acceptanceCriteria": [
        "Form submission first resolves the username to Principal ID using the lookup query",
        "Resolved Principal ID is then used to create the conversation via existing backend function",
        "Appropriate error messages are displayed if username lookup fails",
        "Success flow remains unchanged after Principal ID is resolved"
      ]
    }
  ],
  "constraints": [
    "Maintain the existing startConversation backend function signature - only add new lookup functionality",
    "Preserve all existing conversation creation logic and validation rules",
    "Ensure username lookup is case-insensitive for better user experience"
  ],
  "nonGoals": [
    "Changing the underlying conversation data model or storage structure",
    "Modifying existing conversation display or message thread functionality",
    "Adding autocomplete or typeahead suggestions for username search",
    "Allowing multiple participants to be added by username in a single operation"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}